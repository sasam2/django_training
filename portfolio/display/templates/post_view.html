    <!DOCTYPE html>
    <html>
    <head>
    <title>Post_Show</title>
        {% load static %}
        <link rel="stylesheet" href="{% static "display/style.css" %}" type="text/css">
    </head>
    <body>



    <div id="contents">
        <div class="main">
                    {% if user.is_authenticated %}
            <p align="right">Authenticated as <b><a href="portfolio/signout">{{ user.get_username }}</a></b>.</p>
{% endif %}
    <h1>The Posts</h1>
    <ul class="news"  id="posts">
    {% for p in post %}
    <li id="{{p.id}}">
    <h2> {{ p.title }}</h2>
    {% if p.photo %}
    <img src="{{ p.photo.url }}">
    {% endif %}
    <p> {{ p.content}}</p>
    <p><b> {{ p.author.get_username }}</b> on {{ p.date}}</p>
     {% if user.is_authenticated %}
        {% ifequal user p.author %}
        <form action="/portfolio/post_delete/" method="post" class="message" onsubmit="return confirm('Do you really want to delete post {{p.title}}?');">
        {% csrf_token %}
             <input type="hidden" name="post_id" value="{{p.id}}">
             <input type="submit" value="Delete">
         </form>
        {% endifequal %}
     {% endif %}
    </li>
    {% endfor %}
        <!-- TODO dinamically choose parameter lastPost on ajax -->
        <!-- TODO put delete button on ajax loaded posts -->
        <!-- TODO replace author id by name on ajax loaded posts -->
    </ul>
            <button type="button" onclick="loadDoc()">Load More</button>
            <p id="demo"></p>
            <script>
            function loadDoc() {
              var xhttp = new XMLHttpRequest();
              xhttp.onreadystatechange = function() {
                if(this.readyState==4 && this.status==200){

                    document.getElementById("demo").innerHTML += this.responseText+"<p/> ";
                    var html="";
                    var posts=JSON.parse(JSON.parse( this.responseText));
                    for (var i=0; i < posts.length; i++){
                        html += "<li id=" + posts[i].pk + ">";
                        html += "<h2>" + posts[i].fields['title']+"</h2>";
                        if(posts[i].fields['photo']!=null){
                            html += "<img src=\"\\media\\" + posts[i].fields['photo']+"\">";
                        }
                        html += "<p>" + posts[i].fields['content']+" </p>";
                        html += "<p><b>" + posts[i].fields['author']+"</b> on "+posts[i].fields['date']+" </p>";
                        document.getElementById("posts").innerHTML += html;
                    }
                }
              };
              var postElems = document.getElementById("posts").getElementsByTagName("li");
              var minId=Number.MAX_VALUE;
              for(var i= postElems.length-1; i >= 0; i--){
                pId=Number(postElems[i].id);
                if(pId < minId){
                    minId = pId ;
                }
              }
              xhttp.open('GET', 'portfolio/post_view?lastPost='+minId, true);
              xhttp.send();
            }
            </script>
    </div> </div>
    </body>
    </html>